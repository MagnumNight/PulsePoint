{% extends "base.html" %}

{% block title %}Initial Mood Questionnaire{% endblock %}

{% block content %}
    <!-- Title section -->
    <div class="quality_area">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="section_title mb-55 text-center">
                        <h3>Initial Mood Questionnaire</h3>
                        <p>Help us find your Pulse</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <div class="row justify-content-center">

            <!-- Mood Questionnaire Form -->
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title text-center">How are you feeling today?</h5>
                        <form method="post">
                            {% csrf_token %}
                            <div class="text-center">
                                <label for="id_mood_rating">Mood:</label>
                                <span id="selectedEmoji" data-toggle="modal"
                                      data-target="#emojiModal">ğŸ™‚ Select Emoji</span>
                                <!-- Hidden field to store the actual value for the form submission -->
                                <input type="hidden" name="mood_rating" id="id_mood_rating" value="">
                            </div>
                            <br>
                            <div class="card-footer">
                                <button type="submit" class="btn btn-pulse btn-block">Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Emoji Modal -->
    <div class="modal fade" id="emojiModal" tabindex="-1" role="dialog" aria-labelledby="emojiModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="emojiModalLabel">Select your mood</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-center">
                    <!-- Emojis with their respective values -->
                    <span onclick="selectEmoji('ğŸ¤©', 'ecstatic')">ğŸ¤© Ecstatic</span>
                    <span onclick="selectEmoji('ğŸ˜', 'happy')">ğŸ˜ Happy</span>
                    <span onclick="selectEmoji('ğŸ˜', 'neutral')">ğŸ˜ Neutral</span>
                    <span onclick="selectEmoji('ğŸ˜•', 'confused')">ğŸ˜• Confused</span>
                    <span onclick="selectEmoji('ğŸ˜Ÿ', 'worried')">ğŸ˜Ÿ Worried</span>
                    <span onclick="selectEmoji('ğŸ˜¢', 'sad')">ğŸ˜¢ Sad</span>
                    <span onclick="selectEmoji('ğŸ˜­', 'crying')">ğŸ˜­ Crying</span>
                    <span onclick="selectEmoji('ğŸ˜', 'disappointed')">ğŸ˜ Disappointed</span>
                    <span onclick="selectEmoji('ğŸ˜¡', 'angry')">ğŸ˜¡ Angry</span>
                    <span onclick="selectEmoji('ğŸ˜¤', 'frustrated')">ğŸ˜¤ Frustrated</span>
                    <span onclick="selectEmoji('ğŸ˜', 'confident')">ğŸ˜ Confident</span>
                    <span onclick="selectEmoji('ğŸ˜–', 'annoyed')">ğŸ˜– Annoyed</span>
                    <span onclick="selectEmoji('ğŸ˜“', 'stressed')">ğŸ˜“ Stressed</span>
                    <span onclick="selectEmoji('ğŸ˜Œ', 'relieved')">ğŸ˜Œ Relieved</span>
                    <span onclick="selectEmoji('ğŸ¤”', 'thinking')">ğŸ¤” Thinking</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        function selectEmoji(emoji, moodString) {
            document.getElementById("selectedEmoji").innerText = emoji;
            document.getElementById("id_mood_rating").value = moodString;
            $('#emojiModal').modal('hide');  // Using Bootstrap's jQuery method to hide the modal
        }
    </script>
{% endblock %}
